================================================================
Vertex generation for SuperNEMO tracker commissioning simulation
================================================================

:Authors: FranÃ§ois Mauger
:Date:    2013-10-24

.. contents::
   :depth: 3
..


Presentation
============

This directory  contains the files  needed to describe  several vertex
  generators as input for SuperNEMO tracker commissioning simulation.

 * Version is : ``1.0``

Files
=====

  * ``README.rst`` : This file.
  * ``manager.conf``  :  The main  configuration  file  of the  Bayeux
    ``genbb::manager`` object.
  * ``generators.lis`` : a  list of vertex generators  in the geometry
    of the SuperNEMO tracker commissioning virtual setup.
  * Images:

     * ``images/snemo_tc_experimental_hall_roof_vertexes.jpg``       :
      Picture  of 10000  vertex generated  from the  experimental hall
      roof surface.


Check the configuration
=======================

First make sure the Bayeux and Falaise softwares are installed and setup: ::

      $ which bxgenvtx_production
      ...

Print the list of available vertex generators
---------------------------------------------

From  Falaise build  directory (this  is preliminary),  run: ::

        $ LD_LIBRARY_PATH="$(pwd)/BuildProducts/lib:${LD_LIBRARY_PATH}" \
          bxgenvtx_production \
           --logging "warning" \
           --load-dll Falaise \
           --datatools::resource-path "falaise@$(pwd)/BuildProducts/share/Falaise-1.0.0/resources" \
           --geometry-manager "@falaise:snemo/tracker_commissioning/geometry/1.0/manager.conf" \
           --vertex-generator-manager "@falaise:snemo/tracker_commissioning/simulation/vertexes/1.0/manager.conf" \
           --list
        List of vertex generators :
        |-- anode_wire_bulk  : Generate vertex on the bulk volume of the anode wires
        |-- anode_wire_surface  : Generate vertex on the surface of the anode wires
        |-- experimental_hall_roof (current) : Generate vertex from the hall:
        |-- field_wire_bulk  : Generate vertex on the bulk volume of the field wires
        |-- field_wire_surface  : Generate vertex on the surface of the anode wires:
        `-- top_trigger_surface  : Generate vertex on the top surface of the muon trigger top scintillator plate

Generate 10000 vertexes from the surface of the experimental hall roof
----------------------------------------------------------------------

Run from the Falaise build directory (preliminary): ::

        $ LD_LIBRARY_PATH="$(pwd)/BuildProducts/lib:${LD_LIBRARY_PATH}" \
          bxgenvtx_production \
           --logging "warning" \
           --load-dll Falaise \
           --datatools::resource-path "falaise@$(pwd)/BuildProducts/share/Falaise-1.0.0/resources" \
           --geometry-manager         "@falaise:snemo/tracker_commissioning/geometry/1.0/manager.conf" \
           --vertex-generator-manager "@falaise:snemo/tracker_commissioning/simulation/vertexes/1.0/manager.conf" \
           --shoot \
           --prng-seed 314159 \
           --number-of-vertices 10000 \
           --vertex-generator "experimental_hall_roof" \
           --output-file "snemo_tc_experimental_hall_roof_vertices.txt" \
           --visu --visu-spot-zoom 2.0

Check the output file: ::

  $ less snemo_tc_experimental_hall_roof_vertices.txt
  # generated by : genvtx::genvtx_driver
  #@genvtx.version=4.0.0
  #@geometry.setup.label=snemo::tracker_commissioning
  #@geometry.setup.version=1.0
  #@vertex_generator.name=experimental_hall_roof
  #@length_unit=mm
  249.896741122939 -2339.55625782255 1000
  -2239.77845883928 65.0052690180019 1000
  -2723.15604356118 -863.913346431218 1000
  ...
  -2214.71554401796 718.081772094592 1000
  1072.76537257712 882.473579025827 1000

  $ gnuplot
  ...
  gnuplot> set grid
  gnuplot> set size ratio -1
  gnuplot> set view equal xyz
  gnuplot> set xyplane at -2000
  gnuplot> set xrange [-4000:+4000]
  gnuplot> set yrange [-4000:+4000]
  gnuplot> set zrange [-2000:+2000]
  gnuplot> splot 'snemo_tc_experimental_hall_roof_vertices.txt' with dots
  gnuplot> quit
